{"version":3,"file":"_server.js","sources":["../../../../../../../src/routes/api/products/+server.js"],"sourcesContent":["import { json } from '@sveltejs/kit';\nimport { base, formatRecord, handleAirtableError } from '$lib/server/airtable';\n\nexport async function GET({ url }) {\n    try {\n        const records = await base('Products').select().all();\n        return json(records.map(formatRecord));\n    } catch (error) {\n        const { error: errorMessage, status } = handleAirtableError(error);\n        return json({ error: errorMessage }, { status });\n    }\n}\n\nexport async function POST({ request }) {\n    try {\n        const data = await request.json();\n        const record = await base('Products').create(data);\n        return json(formatRecord(record));\n    } catch (error) {\n        const { error: errorMessage, status } = handleAirtableError(error);\n        return json({ error: errorMessage }, { status });\n    }\n}\n"],"names":[],"mappings":";;AAGO,eAAe,IAAI,EAAE,OAAO;AAC/B,MAAI;AACA,UAAM,UAAU,MAAM,KAAK,UAAU,EAAE,OAAQ,EAAC,IAAK;AACrD,WAAO,KAAK,QAAQ,IAAI,YAAY,CAAC;AAAA,EACxC,SAAQ,OAAO;AACZ,UAAM,EAAE,OAAO,cAAc,OAAM,IAAK,oBAAoB,KAAK;AACjE,WAAO,KAAK,EAAE,OAAO,aAAY,GAAI,EAAE,OAAM,CAAE;AAAA,EACvD;AACA;AAEO,eAAe,KAAK,EAAE,WAAW;AACpC,MAAI;AACA,UAAM,OAAO,MAAM,QAAQ,KAAM;AACjC,UAAM,SAAS,MAAM,KAAK,UAAU,EAAE,OAAO,IAAI;AACjD,WAAO,KAAK,aAAa,MAAM,CAAC;AAAA,EACnC,SAAQ,OAAO;AACZ,UAAM,EAAE,OAAO,cAAc,OAAM,IAAK,oBAAoB,KAAK;AACjE,WAAO,KAAK,EAAE,OAAO,aAAY,GAAI,EAAE,OAAM,CAAE;AAAA,EACvD;AACA;"}