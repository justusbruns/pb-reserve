{"version":3,"file":"_server.ts.js","sources":["../../../../../../../src/routes/api/reservations/+server.ts"],"sourcesContent":["import { json } from '@sveltejs/kit';\nimport { base, formatRecord, handleAirtableError } from '$lib/server/airtable';\n\nexport async function GET({ url }) {\n    try {\n        const records = await base('Reservations').select().all();\n        return json(records.map(formatRecord));\n    } catch (error) {\n        const { error: errorMessage, status } = handleAirtableError(error);\n        return json({ error: errorMessage }, { status });\n    }\n}\n\nexport async function POST({ request }) {\n    try {\n        const data = await request.json();\n        const record = await base('Reservations').create(data);\n        return json(formatRecord(record));\n    } catch (error) {\n        const { error: errorMessage, status } = handleAirtableError(error);\n        return json({ error: errorMessage }, { status });\n    }\n}\n\nexport async function PATCH({ request, url }) {\n    try {\n        const id = url.searchParams.get('id');\n        if (!id) {\n            return json({ error: 'Missing id parameter' }, { status: 400 });\n        }\n\n        const data = await request.json();\n        const record = await base('Reservations').update(id, data);\n        return json(formatRecord(record));\n    } catch (error) {\n        const { error: errorMessage, status } = handleAirtableError(error);\n        return json({ error: errorMessage }, { status });\n    }\n}\n\nexport async function DELETE({ url }) {\n    try {\n        const id = url.searchParams.get('id');\n        if (!id) {\n            return json({ error: 'Missing id parameter' }, { status: 400 });\n        }\n\n        await base('Reservations').destroy(id);\n        return json({ success: true });\n    } catch (error) {\n        const { error: errorMessage, status } = handleAirtableError(error);\n        return json({ error: errorMessage }, { status });\n    }\n}\n"],"names":[],"mappings":";;AAGsB,eAAA,IAAI,EAAE,OAAO;AAC3B,MAAA;AACA,UAAM,UAAU,MAAM,KAAK,cAAc,EAAE,SAAS,IAAI;AACxD,WAAO,KAAK,QAAQ,IAAI,YAAY,CAAC;AAAA,WAChC,OAAO;AACZ,UAAM,EAAE,OAAO,cAAc,OAAO,IAAI,oBAAoB,KAAK;AACjE,WAAO,KAAK,EAAE,OAAO,gBAAgB,EAAE,QAAQ;AAAA,EAAA;AAEvD;AAEsB,eAAA,KAAK,EAAE,WAAW;AAChC,MAAA;AACM,UAAA,OAAO,MAAM,QAAQ,KAAK;AAChC,UAAM,SAAS,MAAM,KAAK,cAAc,EAAE,OAAO,IAAI;AAC9C,WAAA,KAAK,aAAa,MAAM,CAAC;AAAA,WAC3B,OAAO;AACZ,UAAM,EAAE,OAAO,cAAc,OAAO,IAAI,oBAAoB,KAAK;AACjE,WAAO,KAAK,EAAE,OAAO,gBAAgB,EAAE,QAAQ;AAAA,EAAA;AAEvD;AAEA,eAAsB,MAAM,EAAE,SAAS,OAAO;AACtC,MAAA;AACA,UAAM,KAAK,IAAI,aAAa,IAAI,IAAI;AACpC,QAAI,CAAC,IAAI;AACE,aAAA,KAAK,EAAE,OAAO,0BAA0B,EAAE,QAAQ,KAAK;AAAA,IAAA;AAG5D,UAAA,OAAO,MAAM,QAAQ,KAAK;AAChC,UAAM,SAAS,MAAM,KAAK,cAAc,EAAE,OAAO,IAAI,IAAI;AAClD,WAAA,KAAK,aAAa,MAAM,CAAC;AAAA,WAC3B,OAAO;AACZ,UAAM,EAAE,OAAO,cAAc,OAAO,IAAI,oBAAoB,KAAK;AACjE,WAAO,KAAK,EAAE,OAAO,gBAAgB,EAAE,QAAQ;AAAA,EAAA;AAEvD;AAEsB,eAAA,OAAO,EAAE,OAAO;AAC9B,MAAA;AACA,UAAM,KAAK,IAAI,aAAa,IAAI,IAAI;AACpC,QAAI,CAAC,IAAI;AACE,aAAA,KAAK,EAAE,OAAO,0BAA0B,EAAE,QAAQ,KAAK;AAAA,IAAA;AAGlE,UAAM,KAAK,cAAc,EAAE,QAAQ,EAAE;AACrC,WAAO,KAAK,EAAE,SAAS,MAAM;AAAA,WACxB,OAAO;AACZ,UAAM,EAAE,OAAO,cAAc,OAAO,IAAI,oBAAoB,KAAK;AACjE,WAAO,KAAK,EAAE,OAAO,gBAAgB,EAAE,QAAQ;AAAA,EAAA;AAEvD;"}