{"version":3,"file":"_server.ts.js","sources":["../../../../../../../src/routes/api/directions/+server.ts"],"sourcesContent":["import { env } from '$env/dynamic/private';\nimport { json } from '@sveltejs/kit';\nimport type { RequestHandler } from './$types';\n\nexport const GET: RequestHandler = async ({ url }) => {\n  const origin = url.searchParams.get('origin');\n  const destination = url.searchParams.get('destination');\n\n  if (!origin || !destination) {\n    return new Response('Origin and destination parameters are required', { status: 400 });\n  }\n\n  if (!env.MAPBOX_TOKEN) {\n    return new Response('Mapbox token not configured', { status: 500 });\n  }\n\n  try {\n    const response = await fetch(\n      `https://api.mapbox.com/directions/v5/mapbox/driving/${origin};${destination}?geometries=geojson&access_token=${env.MAPBOX_TOKEN}`\n    );\n\n    if (!response.ok) {\n      const errorText = await response.text();\n      console.error('Mapbox API error:', {\n        status: response.status,\n        statusText: response.statusText,\n        error: errorText\n      });\n      throw new Error(`Directions request failed: ${response.statusText}`);\n    }\n\n    const data = await response.json();\n    return json(data);\n  } catch (error) {\n    console.error('Directions service error:', error);\n    return new Response(`Directions service error: ${error.message}`, { status: 500 });\n  }\n};\n"],"names":["env"],"mappings":";;AAIO,MAAM,MAAsB,OAAO,EAAE,UAAU;AACpD,QAAM,SAAS,IAAI,aAAa,IAAI,QAAQ;AAC5C,QAAM,cAAc,IAAI,aAAa,IAAI,aAAa;AAElD,MAAA,CAAC,UAAU,CAAC,aAAa;AAC3B,WAAO,IAAI,SAAS,kDAAkD,EAAE,QAAQ,KAAK;AAAA,EAAA;AAGnF,MAAA,CAACA,YAAI,cAAc;AACrB,WAAO,IAAI,SAAS,+BAA+B,EAAE,QAAQ,KAAK;AAAA,EAAA;AAGhE,MAAA;AACF,UAAM,WAAW,MAAM;AAAA,MACrB,uDAAuD,MAAM,IAAI,WAAW,oCAAoCA,YAAI,YAAY;AAAA,IAClI;AAEI,QAAA,CAAC,SAAS,IAAI;AACV,YAAA,YAAY,MAAM,SAAS,KAAK;AACtC,cAAQ,MAAM,qBAAqB;AAAA,QACjC,QAAQ,SAAS;AAAA,QACjB,YAAY,SAAS;AAAA,QACrB,OAAO;AAAA,MAAA,CACR;AACD,YAAM,IAAI,MAAM,8BAA8B,SAAS,UAAU,EAAE;AAAA,IAAA;AAG/D,UAAA,OAAO,MAAM,SAAS,KAAK;AACjC,WAAO,KAAK,IAAI;AAAA,WACT,OAAO;AACN,YAAA,MAAM,6BAA6B,KAAK;AACzC,WAAA,IAAI,SAAS,6BAA6B,MAAM,OAAO,IAAI,EAAE,QAAQ,KAAK;AAAA,EAAA;AAErF;"}